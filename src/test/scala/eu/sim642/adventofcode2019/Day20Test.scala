package eu.sim642.adventofcode2019

import Day20._
import org.scalatest.funsuite.AnyFunSuite

class Day20Test extends AnyFunSuite {

  val exampleInput =
    """         A
      |         A
      |  #######.#########
      |  #######.........#
      |  #######.#######.#
      |  #######.#######.#
      |  #######.#######.#
      |  #####  B    ###.#
      |BC...##  C    ###.#
      |  ##.##       ###.#
      |  ##...DE  F  ###.#
      |  #####    G  ###.#
      |  #########.#####.#
      |DE..#######...###.#
      |  #.#########.###.#
      |FG..#########.....#
      |  ###########.#####
      |             Z
      |             Z
      |""".stripMargin

  val exampleInput2 =
    """                   A
      |                   A
      |  #################.#############
      |  #.#...#...................#.#.#
      |  #.#.#.###.###.###.#########.#.#
      |  #.#.#.......#...#.....#.#.#...#
      |  #.#########.###.#####.#.#.###.#
      |  #.............#.#.....#.......#
      |  ###.###########.###.#####.#.#.#
      |  #.....#        A   C    #.#.#.#
      |  #######        S   P    #####.#
      |  #.#...#                 #......VT
      |  #.#.#.#                 #.#####
      |  #...#.#               YN....#.#
      |  #.###.#                 #####.#
      |DI....#.#                 #.....#
      |  #####.#                 #.###.#
      |ZZ......#               QG....#..AS
      |  ###.###                 #######
      |JO..#.#.#                 #.....#
      |  #.#.#.#                 ###.#.#
      |  #...#..DI             BU....#..LF
      |  #####.#                 #.#####
      |YN......#               VT..#....QG
      |  #.###.#                 #.###.#
      |  #.#...#                 #.....#
      |  ###.###    J L     J    #.#.###
      |  #.....#    O F     P    #.#...#
      |  #.###.#####.#.#####.#####.###.#
      |  #...#.#.#...#.....#.....#.#...#
      |  #.#####.###.###.#.#.#########.#
      |  #...#.#.....#...#.#.#.#.....#.#
      |  #.###.#####.###.###.#.#.#######
      |  #.#.........#...#.............#
      |  #########.###.###.#############
      |           B   J   C
      |           U   P   P
      |""".stripMargin

  val exampleInput3 =
    """             Z L X W       C
      |             Z P Q B       K
      |  ###########.#.#.#.#######.###############
      |  #...#.......#.#.......#.#.......#.#.#...#
      |  ###.#.#.#.#.#.#.#.###.#.#.#######.#.#.###
      |  #.#...#.#.#...#.#.#...#...#...#.#.......#
      |  #.###.#######.###.###.#.###.###.#.#######
      |  #...#.......#.#...#...#.............#...#
      |  #.#########.#######.#.#######.#######.###
      |  #...#.#    F       R I       Z    #.#.#.#
      |  #.###.#    D       E C       H    #.#.#.#
      |  #.#...#                           #...#.#
      |  #.###.#                           #.###.#
      |  #.#....OA                       WB..#.#..ZH
      |  #.###.#                           #.#.#.#
      |CJ......#                           #.....#
      |  #######                           #######
      |  #.#....CK                         #......IC
      |  #.###.#                           #.###.#
      |  #.....#                           #...#.#
      |  ###.###                           #.#.#.#
      |XF....#.#                         RF..#.#.#
      |  #####.#                           #######
      |  #......CJ                       NM..#...#
      |  ###.#.#                           #.###.#
      |RE....#.#                           #......RF
      |  ###.###        X   X       L      #.#.#.#
      |  #.....#        F   Q       P      #.#.#.#
      |  ###.###########.###.#######.#########.###
      |  #.....#...#.....#.......#...#.....#.#...#
      |  #####.#.###.#######.#######.###.###.#.#.#
      |  #.......#.......#.#.#.#.#...#...#...#.#.#
      |  #####.###.#####.#.#.#.#.###.###.#.###.###
      |  #.......#.....#.#...#...............#...#
      |  #############.#.#.###.###################
      |               A O F   N
      |               A A D   M
      |""".stripMargin

  test("Part 1 examples") {
    assert(steps(parseGrid(exampleInput)) == 23)
    assert(steps(parseGrid(exampleInput2)) == 58)
  }

  test("Part 1 input answer") {
    assert(steps(parseGrid(input)) == 664)
  }

  test("Part 2 examples") {
    assert(stepsRecursive(parseGrid(exampleInput)) == 26)
    assert(stepsRecursive(parseGrid(exampleInput3)) == 396)
  }

  test("Part 2 input answer") {
    assert(stepsRecursive(parseGrid(input)) == 7334)
  }
}
